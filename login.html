<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login Page</title>
</head>
<body>
    <h2>Login to Access the Page</h2>
    <form onsubmit="return checkLogin()" method="POST">
        <label for="username">Username:</label><br>
        <input type="text" id="username" name="username" required><br><br>
        <label for="password">Password:</label><br>
        <input type="password" id="password" name="password" required><br><br>
        <input type="submit" value="Login">
    </form>

    <script>
        const storedUsernameHash = '04f8996da763b7a969b1028ee3007569eaf3a635486ddab211d512c85b9df8fb';  // 'user' 的 SHA-256 哈希值
        const storedPasswordHash = '5e884898da28047151d0e56f8dc6292773603d0d6aabbdd62a11ef721d1542d8';  // 'password' 的 SHA-256 哈希值

        async function sha256(str) {
            const encoder = new TextEncoder();
            const data = encoder.encode(str);
            const hash = await crypto.subtle.digest('SHA-256', data);
            return Array.from(new Uint8Array(hash)).map(b => b.toString(16).padStart(2, '0')).join('');
        }

        async function checkLogin() {
            const username = document.getElementById("username").value;
            const password = document.getElementById("password").value;

            const usernameHash = await sha256(username);
            const passwordHash = await sha256(password);

            if (usernameHash === storedUsernameHash && passwordHash === storedPasswordHash) {
                alert("Login successful!");

                // 将登录状态存储在 localStorage 中
                localStorage.setItem('isLoggedIn', 'true');

                window.location.href = "protected.html";  // 登录成功后重定向
                return false;
            } else {
                alert("Login failed. Please try again.");
                return false;
            }
        }
    </script>
</body>
</html>
